(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{164:function(e,t,a){e.exports=a.p+"static/media/schema.0b7a4fcc.graphql"},167:function(e,t,a){e.exports=a(230)},172:function(e,t,a){},173:function(e,t,a){},230:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(49),l=a.n(c),o=a(43),i=a(57),u=(a(172),a(173),a(79)),s=a(98),m=a(101),d=a(99),f=a(102),g=a(84),b=a(80),p=a(26),h=a(81),v=a.n(h),x=a(69),E=a(3),y=a(4),w=a(64),j=a(82),C=a(8),O=a(18);var k={container:{flex:1,justifyContent:"center",alignItems:"center",margin:C.a.large}},S=a(65),B=a(24);function I(e){var t=e.size;return r.a.createElement(y.b,{style:[A.logo,A[t]]},"pacefactory")}var A={logo:{fontFamily:"Uppen Arms NF",textTransform:"lowercase",transform:"skew(-35deg)"},medium:{fontSize:28,marginTop:-C.a.xSmall}};function M(e){var t=e.pages,a=e.sources,n=e.selectedPage,c=e.selectedSource,l=e.onPageChange,o=e.onSourceChange;return r.a.createElement(y.c,{style:D.container},r.a.createElement(B.e,{size:C.a.small}),r.a.createElement(I,{size:"medium"}),r.a.createElement(y.c,{style:D.separator}),r.a.createElement(S.b,{light:!0,placeholder:"Select page",selectedValue:n,onChange:l},t.map(function(e){return r.a.createElement(S.a,{key:e,label:e,value:e})})),r.a.createElement(B.e,{size:C.a.medium}),r.a.createElement(S.b,{placeholder:"Select source",selectedValue:c,onChange:o},a.map(function(e){return r.a.createElement(S.a,{key:e,label:e,value:e})})))}var D={container:{flexDirection:"row",alignItems:"center",minHeight:72,padding:C.a.medium,color:E.b.white,backgroundColor:E.b.offBlack64},separator:{width:C.a.medium,height:C.a.large,marginRight:C.a.medium,borderRight:"solid ".concat(E.b.white64," 1px")}},R=a(29),T=a.n(R),N=a(12),L=a(86),V=a(131),z=function(){return r.a.createElement("svg",{width:"22px",height:"22px",viewBox:"0 0 32 32"},r.a.createElement("g",{className:Object(N.b)(W.timeIcon)},r.a.createElement("path",{d:"M16,31A15,15,0,1,1,31,16"}),r.a.createElement("polyline",{points:"16 5 16 16 9 23"}),r.a.createElement("polyline",{points:"26 19 31 24 26 29"}),r.a.createElement("line",{x1:"31",x2:"19",y1:"24",y2:"24"})))},_=function(){return r.a.createElement("svg",{width:"22px",height:"22px",viewBox:"0 0 32 32"},r.a.createElement("g",{className:Object(N.b)(W.timeIcon)},r.a.createElement("path",{d:"M16,31A15,15,0,1,1,31,16"}),r.a.createElement("polyline",{points:"16 5 16 16 9 23"}),r.a.createElement("polyline",{points:"25 29 20 24 25 19"}),r.a.createElement("line",{x1:"20",x2:"32",y1:"24",y2:"24"})))},F=function(){return r.a.createElement("svg",{width:"128px",height:"128px",viewBox:"0 0 32 32"},r.a.createElement("g",null,r.a.createElement("path",{d:"M32,23.001c0-4.633-3.5-8.444-8-8.942V5.584L18.414,0H0v32h24v-0.059C28.5,31.443,32,27.633,32,23.001z M17.998,2.413 L21.586,6h-3.588V2.413z M2,30V1.998h14v6.001h6v6.06c-0.863,0.095-1.688,0.311-2.461,0.633C18.956,14.013,18,14,18,14l-2,0l-2-2 h-4l-2,2H6c0,0-2,0-2,2v6c0,2,2,2,2,2s4.531,0,8.058,0c0.267,2.42,1.493,4.548,3.29,6H2z M12,22c-1.658,0-3-1.342-3-3 c0-1.656,1.342-3,3-3c1.624,0,2.94,1.295,2.991,2.907c-0.333,0.651-0.589,1.347-0.756,2.077C13.685,21.603,12.892,22,12,22z M23,30 c-3.865-0.008-6.995-3.135-7-6.999c0.006-3.865,3.135-6.995,7-7.001c3.864,0.006,6.991,3.136,6.999,7.001 C29.991,26.865,26.864,29.992,23,30z"}),r.a.createElement("polygon",{points:"19,25 21,27 23,25 25,27 27,25 25,23 27,21 25,19 23,21 21,19 19,21 21,23"})))},W=N.a.create({timeIcon:{fill:"none",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"2px"}}),H=function(){return r.a.createElement(w.b,{content:r.a.createElement(y.c,null,r.a.createElement(y.c,{style:G.centerContainer},r.a.createElement(O.f,null,"Time Range")),r.a.createElement(y.c,{style:G.centerContainer},r.a.createElement(O.g,null,"Not Implemented")))})};function P(e){var t=e.filteredBy,a=e.onFilterByChange,n=e.options,c=e.selectedOption,l=e.onOptionChange,o=e.startTime,i=e.endTime,u=T()(o),s=T()(i),m="ddd, HH:mm";return s.diff(u,"years")?m="MMMM Do YYYY":s.diff(u,"days")&&(m="MMM D, HH:mm"),r.a.createElement(y.c,{style:G.container},r.a.createElement(w.a,{modal:r.a.createElement(H,null)},function(e){var t=e.openModal;return r.a.createElement(L.a,{light:!0,size:"medium",kind:"secondary",style:G.timeButton,onClick:t},r.a.createElement(z,null),r.a.createElement(y.c,{style:G.leftSeparator}),u.format(m))}),r.a.createElement(B.d,null),r.a.createElement("div",{className:Object(N.b)(G.optionsContainer)},r.a.createElement(S.b,{light:!0,style:G.filterBySelect,placeholder:"Filter by",selectedValue:t,onChange:a},r.a.createElement(S.a,{label:"Validate by rule",value:"rules"}),r.a.createElement(S.a,{label:"Validate by tag",value:"tags"})),r.a.createElement(V.b,{groupName:"options",selectedValue:c,style:G.options,onChange:l},n.map(function(e){return r.a.createElement(V.a,{key:e,label:e,value:e,style:[G.option,c===e&&G.selectedOption]})}))),r.a.createElement(B.d,null),r.a.createElement(w.a,{modal:r.a.createElement(H,null)},function(e){var t=e.openModal;return r.a.createElement(L.a,{light:!0,size:"medium",kind:"secondary",style:G.timeButton,onClick:t},s.format(m),r.a.createElement(y.c,{style:G.rightSeparator}),r.a.createElement(_,null))}))}var Y,G=N.a.create({container:{flexDirection:"row",alignItems:"center",padding:"".concat(C.a.xxxSmall,"px ").concat(C.a.medium,"px"),color:E.b.white,backgroundColor:E.b.offBlack50,borderTop:"solid ".concat(E.b.offBlack50," 1px")},timeButton:{margin:"-".concat(C.a.xxSmall,"px 0"),":active":{color:E.b.white}},leftSeparator:{width:C.a.small,height:C.a.medium,marginLeft:C.a.small,borderLeft:"solid ".concat(E.b.white64," 2px")},rightSeparator:{width:C.a.small,height:C.a.medium,marginRight:C.a.small,borderRight:"solid ".concat(E.b.white64," 2px")},filterBySelect:{height:C.a.xLarge,margin:C.a.medium},optionsContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",margin:"0px ".concat(C.a.small,"px"),"@media (max-width: 1023px)":{flexDirection:"column"}},options:{flexDirection:"row",flexWrap:"wrap"},option:{padding:"".concat(C.a.xSmall,"px ").concat(C.a.small,"px ").concat(C.a.xxSmall,"px ").concat(C.a.xSmall,"px"),margin:"".concat(C.a.xxxSmall,"px ").concat(C.a.xxSmall,"px"),border:"solid ".concat(E.b.offBlack16," 1px"),borderRadius:C.a.xxSmall},selectedOption:{backgroundColor:E.b.blue},centerContainer:{justifyContent:"center",alignItems:"center",margin:C.a.medium}}),$=a(62);function q(e){var t=e.events,a=e.selectedEvent,c=e.startTime,l=e.endTime,o=e.onSelectTime,i=Object(n.useState)(null),u=Object(p.a)(i,2),s=u[0],m=u[1],d=Object(n.useState)([]),f=Object(p.a)(d,2),g=f[0],b=f[1];return Object(n.useEffect)(function(){var e=-1,n=t.map(function(t,n){var r,o=(T()(t.created).valueOf()-c)/(l-c)*100+"%";switch(a&&a.id===t.id&&(e=n),t.validation){case Y.Confirmed:r=E.b.green;break;case Y.Rejected:r=E.b.red;break;default:r=e===n?E.b.blue:E.b.offBlack}return{id:t.id,x:o,color:r,opacity:e===n?"0.5":"0.1"}});if(-1!==e){var r=n[e];n.splice(e,1),n=[r].concat(Object($.a)(n))}b(n)},[t,a]),r.a.createElement(y.c,{style:J.container,onMouseMove:function(e){return m(e.pageX)},onMouseOut:function(){return m(null)},onClick:function(e){if(t.length){var a=window.innerWidth/t.length/2,n=Math.round((l-c)*((e.clientX+a)/window.innerWidth)+c);o(n)}}},r.a.createElement("svg",{style:{position:"absolute"},width:"100%",height:"100%",viewBox:"0 0 ".concat(g.length," 40"),preserveAspectRatio:"none"},g.map(function(e){return r.a.createElement("line",{key:e.id,stroke:e.color,strokeOpacity:e.opacity,strokeWidth:"1px",x1:e.x,x2:e.x,y1:"0",y2:"100%"})})),null!==s&&r.a.createElement(y.c,{style:[J.hoverCursor,{left:s}]}))}!function(e){e.None="NONE",e.Rejected="REJECTED",e.Confirmed="CONFIRMED"}(Y||(Y={}));var J={container:{minHeight:40,backgroundColor:E.b.offBlack8,borderTop:"solid ".concat(E.b.white64," 1px"),borderBottom:"solid ".concat(E.b.offBlack32," 1px"),cursor:"crosshair"},hoverCursor:{position:"absolute",width:1,height:"100%",borderRight:"solid ".concat(E.b.offBlack32," 1px"),pointerEvents:"none"}},X=function(e){var t=e.className;return r.a.createElement("svg",{className:t,viewBox:"0 0 50 50"},r.a.createElement("polygon",{points:"15,2.75 12.914,4.836 33.078,25 12.914,45.164 15,47.25 37.25,25"}))};function Q(e){var t=e.events,a=e.selectedEvent,c=e.onNext,l=Object(n.useState)(0),o=Object(p.a)(l,2),i=o[0],u=o[1],s=Object(n.useState)(0),m=Object(p.a)(s,2),d=m[0],f=m[1],g=Object(n.useState)(null),b=Object(p.a)(g,2),h=b[0],v=b[1],x=Object(n.useState)(null),E=Object(p.a)(x,2),w=E[0],j=E[1];return Object(n.useEffect)(function(){var e=0,n=0,r=null,c=null,l=!0,o=!1,i=void 0;try{for(var s,m=t[Symbol.iterator]();!(l=(s=m.next()).done);l=!0){var d=s.value;T()(d.created).valueOf()<=T()(a.created).valueOf()||(n++,r||(r=d),d.validation===Y.None&&(e++,c||(c=d)))}}catch(g){o=!0,i=g}finally{try{l||null==m.return||m.return()}finally{if(o)throw i}}f(n),u(e),v(r),j(c)},[t,a]),r.a.createElement(y.c,{style:U.container},r.a.createElement(y.c,{style:U.arrowsContainer},r.a.createElement(y.c,{style:U.largeContainer,onClick:function(){return w&&c(w)}},r.a.createElement(X,{className:Object(N.b)(w?U.largeArrow:U.largeArrowDisabled)})),r.a.createElement(y.c,{style:U.smallContainer,onClick:function(){return h&&c(h)}},r.a.createElement(X,{className:Object(N.b)(h?U.smallArrow:U.smallArrowDisabled)}))),r.a.createElement(y.c,{style:U.labelContainer},r.a.createElement(O.f,null,"Validate"," ",r.a.createElement(y.b,{style:{fontWeight:900}},"".concat(i,"/").concat(d)))))}var U=N.a.create({container:{flex:1,justifyContent:"center",aligntItems:"center"},arrowsContainer:{flexDirection:"row",alignItems:"center"},largeContainer:{},smallContainer:{position:"absolute",left:0},largeArrow:{width:"150px",height:"150px",cursor:"pointer",fill:E.b.offBlack50,":hover":{fill:E.b.offBlack64}},largeArrowDisabled:{width:"150px",height:"150px",fill:E.b.offBlack16},smallArrow:{width:"75px",height:"75px",cursor:"pointer",fill:E.b.offBlack50,":hover":{fill:E.b.offBlack64}},smallArrowDisabled:{width:"75px",height:"75px",fill:E.b.offBlack16},labelContainer:{alignItems:"center",paddingTop:C.a.small,paddingRight:25,pointerEvents:"none",userSelect:"none"}}),K=function(e){var t=e.className;return r.a.createElement("svg",{className:t,viewBox:"0 0 50 50"},r.a.createElement("polygon",{points:"35,2.75 37.086,4.836 16.922,25 37.086,45.164 35,47.25 12.75,25"}))};function Z(e){var t=e.events,a=e.selectedEvent,c=e.onPrev,l=Object(n.useState)(0),o=Object(p.a)(l,2),i=o[0],u=o[1],s=Object(n.useState)(0),m=Object(p.a)(s,2),d=m[0],f=m[1],g=Object(n.useState)(null),b=Object(p.a)(g,2),h=b[0],v=b[1],x=Object(n.useState)(null),E=Object(p.a)(x,2),w=E[0],j=E[1];return Object(n.useEffect)(function(){var e=0,n=0,r=null,c=null,l=!0,o=!1,i=void 0;try{for(var s,m=Object($.a)(t).reverse()[Symbol.iterator]();!(l=(s=m.next()).done);l=!0){var d=s.value;T()(d.created).valueOf()>=T()(a.created).valueOf()||(n++,r||(r=d),d.validation===Y.None&&(e++,c||(c=d)))}}catch(g){o=!0,i=g}finally{try{l||null==m.return||m.return()}finally{if(o)throw i}}f(n),u(e),v(r),j(c)},[t,a]),r.a.createElement(y.c,{style:ee.container},r.a.createElement(y.c,{style:ee.arrowsContainer},r.a.createElement(y.c,{style:ee.largeContainer,onClick:function(){return w&&c(w)}},r.a.createElement(K,{className:Object(N.b)(w?ee.largeArrow:ee.largeArrowDisabled)})),r.a.createElement(y.c,{style:ee.smallContainer,onClick:function(){return h&&c(h)}},r.a.createElement(K,{className:Object(N.b)(h?ee.smallArrow:ee.smallArrowDisabled)}))),r.a.createElement(y.c,{style:ee.labelContainer},r.a.createElement(O.f,null,"Validate"," ",r.a.createElement(y.b,{style:{fontWeight:900}},"".concat(i,"/").concat(d)))))}var ee=N.a.create({container:{flex:1,justifyContent:"center",aligntItems:"center"},arrowsContainer:{flexDirection:"row",alignItems:"center"},largeContainer:{},smallContainer:{position:"absolute",right:0},largeArrow:{width:"150px",height:"150px",cursor:"pointer",fill:E.b.offBlack50,":hover":{fill:E.b.offBlack64}},largeArrowDisabled:{width:"150px",height:"150px",fill:E.b.offBlack16},smallArrow:{width:"75px",height:"75px",cursor:"pointer",fill:E.b.offBlack50,":hover":{fill:E.b.offBlack64}},smallArrowDisabled:{width:"75px",height:"75px",fill:E.b.offBlack16},labelContainer:{alignItems:"center",paddingTop:C.a.small,paddingLeft:25,pointerEvents:"none",userSelect:"none"}}),te=a(32);function ae(){var e=Object(b.a)(["\n    mutation ValidateEvent($input: ValidateEventInput!) {\n        validateEvent(input: $input) {\n            id\n            created\n            validation\n            ... on AlarmEvent {\n                rule\n                image {\n                    id\n                    uri\n                    tags\n                }\n            }\n        }\n    }\n"]);return ae=function(){return e},e}var ne=v()(ae()),re=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),t}(x.b);function ce(e){e.source;var t,a=e.event,n=[],c="";return"image"in a?(t=r.a.createElement(y.c,{style:le.eventImage},r.a.createElement("img",{style:le.eventImage,src:a.image.uri})),a.image.tags.length&&(n=a.image.tags),c=a.rule):t=r.a.createElement(y.c,{style:le.noImage},r.a.createElement(F,null)),r.a.createElement(y.c,{style:le.container},r.a.createElement(y.c,{style:le.header},r.a.createElement(O.f,null,T()(a.created).format("MMM D YYYY, h:mm a"))),r.a.createElement(y.c,{style:le.tags},n.map(function(e){return r.a.createElement(O.b,{key:e,style:le.tag},e)}),r.a.createElement(O.h,{style:le.tag},"+")),r.a.createElement(y.c,{style:le.image},t),r.a.createElement(re,{mutation:ne},function(e){return c&&r.a.createElement(y.c,{style:le.footer},r.a.createElement(L.a,{disabled:a.validation===Y.Rejected,icon:a.validation===Y.Rejected&&te.b.incorrect,style:[oe.rejectButton,a.validation===Y.Rejected&&oe.rejectButtonDisabled,a.validation===Y.Confirmed&&oe.rejectButtonLight],onClick:function(){e({variables:{input:{eventId:a.id,validation:Y.Rejected}}})}},a.validation===Y.Rejected?"Rejected":"Reject"),r.a.createElement(B.e,{size:C.a.xxxLarge}),r.a.createElement(O.c,null,c),r.a.createElement(B.e,{size:C.a.xxxLarge}),r.a.createElement(L.a,{disabled:a.validation===Y.Confirmed,icon:a.validation===Y.Confirmed&&te.b.correct,style:[oe.confirmButton,a.validation===Y.Confirmed&&oe.confirmButtonDisabled,a.validation===Y.Rejected&&oe.confirmButtonLight],onClick:function(){e({variables:{input:{eventId:a.id,validation:Y.Confirmed}}})}},a.validation===Y.Confirmed?"Confirmed":"Confirm"))}))}var le={container:{backgroundColor:E.b.offWhite,borderRadius:C.a.xxxSmall,border:"1px solid rgba(33, 36, 44, 0.16)",boxShadow:"0px 4px 8px rgba(33, 36, 44, 0.16)"},header:{padding:"".concat(C.a.small,"px ").concat(C.a.xSmall,"px ").concat(C.a.xSmall,"px ").concat(C.a.xSmall,"px"),textAlign:"center"},image:{flex:1,justifyContent:"center",alignItems:"center",padding:C.a.small},eventImage:{maxHeight:"100%",maxWidth:"100%",objectFit:"contain"},noImage:{fill:E.b.offBlack8},tags:{flexDirection:"row",justifyContent:"center",padding:"".concat(C.a.xxxSmall,"px ").concat(C.a.xxSmall,"px"),backgroundColor:E.b.offBlack8},tag:{margin:C.a.xxxSmall,padding:"".concat(C.a.xxxSmall,"px ").concat(C.a.small,"px"),borderRadius:C.a.medium,backgroundColor:E.b.offBlack32,color:E.b.white},footer:{flexDirection:"row",alignItems:"center",padding:C.a.small,borderTop:"".concat(C.a.small,"px solid ").concat(E.b.offBlack8)}},oe=N.a.create({rejectButton:{width:"100%",backgroundColor:E.b.red,":hover":{boxShadow:"0 0 0 1px ".concat(E.b.white,", 0 0 0 3px ").concat(E.b.red)}},rejectButtonDisabled:{backgroundColor:"transparent",color:E.b.red,":hover":{boxShadow:"none"}},rejectButtonLight:{backgroundColor:"transparent",border:"1px solid ".concat(E.b.red),color:E.b.red,":hover":{backgroundColor:E.b.red,color:E.b.white}},confirmButton:{width:"100%",backgroundColor:E.b.green,":hover":{boxShadow:"0 0 0 1px ".concat(E.b.white,", 0 0 0 3px ").concat(E.b.green)}},confirmButtonDisabled:{backgroundColor:"transparent",color:E.b.green,":hover":{boxShadow:"none"}},confirmButtonLight:{backgroundColor:"transparent",border:"1px solid ".concat(E.b.green),color:E.b.green,":hover":{backgroundColor:E.b.green,color:E.b.white}}});function ie(e){var t=e.numTotal,a=e.numTotalConfirmed,n=e.numTotalRejected,c=e.numFiltered,l=e.numFilteredConfirmed,o=e.numFilteredRejected,i=e.filterName,u=t>0?a/t:0,s=c>0?l/c:0,m="hsl(".concat(120*u,", 50%, 40%)"),d="hsl(".concat(120*u,", 80%, 40%)"),f="hsl(".concat(120*s,", 100%, 40%)");return r.a.createElement(y.c,{style:ue.container},r.a.createElement(y.c,{style:ue.filteredContainer},r.a.createElement(O.f,null,"Validated ".concat(i," "),r.a.createElement(y.b,{style:{fontWeight:900}},"".concat(l+o,"/").concat(c)))),r.a.createElement(B.e,{size:C.a.large}),r.a.createElement(y.c,{style:[ue.accuracyGauge,{backgroundColor:m,backgroundImage:"linear-gradient(to right, ".concat(m,", ").concat(d,")")}]},r.a.createElement(O.c,{style:[ue.filteredAccuracy,{backgroundColor:f}]},c>0?Math.round(l/c*100):"","%"),r.a.createElement(O.d,{style:ue.totalAccuracy},t>0?Math.round(a/t*100):"","%")),r.a.createElement(B.e,{size:C.a.large}),r.a.createElement(y.c,{style:ue.totalContainer},r.a.createElement(O.f,null,"Validated total ",r.a.createElement(y.b,{style:{fontWeight:900}},"".concat(a+n,"/").concat(t)))))}var ue={container:{flexDirection:"row",justifyContent:"center",alignItems:"center",paddingTop:C.a.small,paddingBottom:C.a.medium},filteredContainer:{flex:1,alignItems:"flex-end"},totalContainer:{flex:1,alignItems:"flex-start"},accuracyGauge:{flexDirection:"row",justifyContent:"center",alignItems:"center",paddingLeft:3,borderRadius:"100%",boxShadow:"inset 0 4px 8px rgba(33, 36, 44, 0.16)"},filteredAccuracy:{color:E.b.white,padding:C.a.xLarge,borderRadius:"100%",boxShadow:"4px 0px 8px rgba(33, 36, 44, 0.16)",textShadow:"0 -1px 2px ".concat(E.b.offBlack16)},totalAccuracy:{padding:"".concat(C.a.xxLarge,"px ").concat(C.a.large,"px ").concat(C.a.xxLarge,"px ").concat(C.a.medium,"px"),color:E.b.white,textShadow:"0 -1px 2px ".concat(E.b.offBlack16)}};function se(){var e=Object(b.a)(["\n        query GetEvents($sourceId: ID!) {\n            events(sourceId: $sourceId) {\n                id\n                created\n                validation\n                ... on AlarmEvent {\n                    rule\n                    image {\n                        id\n                        uri\n                        tags\n                    }\n                }\n            }\n        }\n    "]);return se=function(){return e},e}function me(e){var t=e.source,a=e.events,c=e.startTime,l=e.endTime,o=e.rules,i=e.tags,u=Object(n.useState)("rules"),s=Object(p.a)(u,2),m=s[0],d=s[1],f=Object(n.useState)(o.length?o[0]:void 0),g=Object(p.a)(f,2),b=g[0],h=g[1],v=Object(n.useState)(i.length?i[0]:void 0),x=Object(p.a)(v,2),E=x[0],w=x[1],j=Object(n.useState)(c),C=Object(p.a)(j,2),O=C[0],k=C[1],S=Object(n.useState)(null),B=Object(p.a)(S,2),I=B[0],A=B[1],M=0,D=0,R=a.filter(function(e){switch(e.validation){case Y.Confirmed:M++;break;case Y.Rejected:D++}switch(m){case"rules":return!b||("rule"in e?e.rule===b:"<unknown>"===b);case"tags":return!E||"image"in e&&e.image.tags.includes(E)}}),N=0,L=0;function V(e){k(T()(e.created).valueOf())}return R.forEach(function(e){switch(e.validation){case Y.Confirmed:N++;break;case Y.Rejected:L++}}),Object(n.useEffect)(function(){var e=null,t=!0,a=!1,n=void 0;try{for(var r,c=R[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var l=r.value;if(T()(l.created).valueOf()>O){e||(e=l);break}e=l}}catch(o){a=!0,n=o}finally{try{t||null==c.return||c.return()}finally{if(a)throw n}}A(e)},[R,O]),r.a.createElement(y.c,{style:fe.page},r.a.createElement(P,{filteredBy:m,onFilterByChange:function(e){d(e)},options:"rules"===m?o:i,selectedOption:("rules"===m?b:E)||"",onOptionChange:function(e){"rules"===m?h(o.find(function(t){return t===e})||void 0):w(i.find(function(t){return t===e})||void 0)},startTime:c,endTime:l}),r.a.createElement(q,{events:R,selectedEvent:I,startTime:c,endTime:l,onSelectTime:function(e){k(e)}}),I&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.c,{style:fe.workspace},r.a.createElement(y.c,{style:fe.prevEvent},r.a.createElement(Z,{events:R,selectedEvent:I,onPrev:V})),r.a.createElement(y.c,{style:fe.selectedEvent},r.a.createElement(ce,{source:t,event:I})),r.a.createElement(y.c,{style:fe.nextEvent},r.a.createElement(Q,{events:R,selectedEvent:I,onNext:V}))),r.a.createElement(y.c,{style:fe.footer},r.a.createElement(ie,{numTotal:a.length,numTotalConfirmed:M,numTotalRejected:D,numFiltered:R.length,numFilteredConfirmed:N,numFilteredRejected:L,filterName:("rules"===m?b:E)||""}))))}var de=Object(x.c)(v()(se()),{options:function(e){return{variables:{sourceId:e.source.id}}},props:function(e){var t=e.data,a=e.ownProps,n=t.events||void 0,r=0,c=0,l=new Set,o=new Set;return n&&n.length?n.forEach(function(e){var t=T()(e.created).valueOf();r=Math.min(r||t,t),c=Math.max(c||t,t),"AlarmEvent"===e.__typename?(l.add(e.rule),e.image.tags.forEach(function(e){return o.add(e)})):l.add("<unknown>")}):(r=T()().startOf("day").valueOf(),c=T()().endOf("day").valueOf()),Object(g.a)({},a,{events:n,startTime:r,endTime:c,rules:Array.from(l).sort(),tags:Array.from(o).sort()})}})(function(e){return e.events?r.a.createElement(me,e):r.a.createElement(y.c,{style:fe.centerContainer},r.a.createElement(j.a,null))}),fe={page:{flex:1},centerContainer:{justifyContent:"center",alignItems:"center",margin:C.a.medium},workspace:{flex:1,flexDirection:"row"},prevEvent:{},selectedEvent:{flex:1,padding:C.a.medium},nextEvent:{},footer:{}};var ge={container:{flex:1,justifyContent:"center",alignItems:"center",margin:C.a.large}};function be(){var e=Object(b.a)(["\n        query GetSources {\n            sources {\n                id\n                name\n                uri\n            }\n        }\n    "]);return be=function(){return e},e}var pe=[{title:"Validation",name:"validation",component:de},{title:"Viewer",name:"viewer",component:function(e){return e.source,r.a.createElement(y.c,{style:ge.container},r.a.createElement(O.g,null,"Not Implemented"))}},{title:"Configuration",name:"configuration",component:function(e){return e.source,r.a.createElement(y.c,{style:k.container},r.a.createElement(O.g,null,"Not Implemented"))}}];function he(e){var t=e.history,a=e.location,c=e.sources,l=Object(n.useState)(pe[0]),i=Object(p.a)(l,2),u=i[0],s=i[1],m=Object(n.useState)(c[0]),d=Object(p.a)(m,2),f=d[0],g=d[1],b=(Object(o.f)(a.pathname,"/:page/:source")||{params:{page:null,source:null}}).params,h=b.page,v=b.source;if(Object(n.useEffect)(function(){var e=pe.find(function(e){return e.name===h});e&&s(e)},[h]),Object(n.useEffect)(function(){var e=c.find(function(e){return e.id===v});e&&g(e)},[v]),!h||!v)return r.a.createElement(o.a,{to:"/".concat(u.name,"/").concat(f.id)});return r.a.createElement(y.c,{style:ye.app},r.a.createElement(M,{pages:pe.map(function(e){return e.title}),selectedPage:u.title,onPageChange:function(e){var a=pe.find(function(t){return t.title===e});a&&t.push("/".concat(a.name,"/").concat(f.id))},sources:c.map(function(e){return e.name}),selectedSource:f.name,onSourceChange:function(e){var a=c.find(function(t){return t.name===e});a&&t.push("/".concat(u.name,"/").concat(a.id))}}),r.a.createElement(o.d,null,pe.map(function(e){var t=e.name,a=e.component;return r.a.createElement(o.b,{key:t,path:"/".concat(t,"/:source"),render:function(e){return r.a.createElement(a,Object.assign({},e,{source:f}))}})}),r.a.createElement(o.a,{to:"/".concat(u.name,"/").concat(f.id)})))}var ve=Object(x.c)(v()(be()),{options:function(){return{variables:{}}},props:function(e){var t=e.data,a=e.ownProps,n=t.sources||void 0;return Object(g.a)({},a,{sources:n})}})(function(e){var t=e.sources;if(!t)return r.a.createElement(y.c,{style:ye.centerContainer},r.a.createElement(j.a,null));if(!t.length)throw new Error("No sources were loaded!");return r.a.createElement(he,Object.assign({},e,{sources:t}))});var xe,Ee=(xe=ve,function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={error:null},a}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidCatch",value:function(e){this.setState({error:e.toString()})}},{key:"render",value:function(){var e=this.state.error;return e?r.a.createElement(w.a,{opened:!0,modal:r.a.createElement(w.b,{content:r.a.createElement(y.c,{style:ye.centerContainer},r.a.createElement(O.a,{style:{color:E.b.red}},e))}),onClose:function(){}}):r.a.createElement(xe,this.props)}}]),t}(r.a.Component)),ye={app:{flex:1},centerContainer:{justifyContent:"center",alignItems:"center",margin:C.a.medium}},we=a(87),je=a(166),Ce=a(165),Oe=a(163),ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(u.a)(this,e),this._seed=0,this._seed=t%2147483647,this._seed<=0&&(this._seed+=2147483646)}return Object(s.a)(e,[{key:"int",value:function(){return this._seed=16807*this._seed%2147483647}},{key:"float",value:function(){return(this.int()-1)/2147483646}},{key:"between",value:function(e,t){return Math.min(t,Math.floor(this.float()*Math.floor(t+1-e)+e))}},{key:"shuffle",value:function(e){for(var t=(e=Object($.a)(e)).length-1;t>0;t--){var a=this.between(0,t),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e}}]),e}(),Se=a(164),Be=a.n(Se);function Ie(e,t){if("1"!==t.sourceId)return[];var a=new ke,n=a.shuffle(Array(50).fill(void 0).map(function(e,t){var n=String(t+1);return{id:n,uri:"".concat("https://pacefactory.github.io/webapp-public/","images/").concat(n.padStart(3,"0"),".jpg"),tags:a.shuffle([].concat(Object($.a)(a.shuffle(["cat","dog"]).slice(0,1)),Object($.a)(a.shuffle(["small","large"]).slice(0,1)))).slice(0,a.between(0,2))}})),r=0,c=a.shuffle(Array(50).fill(void 0).map(function(e,t){var n=a.float()*(86400-r)*Math.pow((t+1)/50,3);return r+=n,n}));r=0;var l=c.map(function(e,t){return r+=e,{id:String(t+1),created:T()().startOf("day").add(Math.floor(r),"seconds").toISOString(!0),validation:Y.None,rule:a.shuffle(["idle_cat","moving_cat","idle_dog","moving_dog"]).slice(0,1)[0],image:n[t]}});return Ie.events=l,l}var Ae={Query:{sources:function(){return[{id:"1",name:"Camera 1",uri:"rtsp://camera_1"}]},events:Ie},Mutation:{validateEvent:function(e,t){var a=t.input,n=Ie.events.find(function(e){return e.id===a.eventId});return Object(g.a)({},n,{validation:a.validation})}},Event:{__resolveType:function(){return"AlarmEvent"}}};var Me=function(e){return function(){var t=Object(n.useState)(null),a=Object(p.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)(function(){fetch(Be.a).then(function(e){return e.text()}).then(function(e){var t=Object(Oe.makeExecutableSchema)({typeDefs:e,resolvers:Ae}),a=new Ce.a({schema:t}),n=new je.a,r=new we.a({link:a,cache:n});l(r)})},[]),c?r.a.createElement(x.a,{client:c},r.a.createElement(e,null)):null}}(Object(o.g)(Ee));l.a.render(r.a.createElement(i.a,{basename:"/webapp-public"},r.a.createElement(Me,null)),document.getElementById("app"))}},[[167,1,2]]]);
//# sourceMappingURL=main.9b12c231.chunk.js.map